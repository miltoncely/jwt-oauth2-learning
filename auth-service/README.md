# Auth Service Module

This service issues JWT tokens signed with an RSA Private Key.

## Features
- **JWT Signing**: Uses RS256 algorithm.
- **Endpoints**: 
  - `POST /oauth/token` - Issue new JWT token
  - `POST /oauth/revoke` - Revoke token (logout)
- **Redis Whitelist**: Stores active tokens; revocation deletes them from Redis.
- **H2 Database**: In-memory database with R2DBC for user authentication.

## Configuration
- **Private Key**: Loaded from `src/main/resources/keys/private.pem` (generated by key-generator).
- **Port**: Defaults to 8080.
- **Redis**: Required for token whitelist management.

## How to Run
1. Ensure Redis is running:
   ```bash
   docker run -d -p 6379:6379 redis
   ```
2. Run the service:
   ```bash
   ./gradlew :auth-service:bootRun
   ```

## Testing
Request a token:
```bash
# Admin User (Roles: ADMIN, USER)
curl -X POST "http://localhost:8080/oauth/token?grant_type=password&username=admin&password=123456"

# Normal User (Roles: USER)
curl -X POST "http://localhost:8080/oauth/token?grant_type=password&username=user&password=password"
```
Response:
```json
{
  "access_token": "eyJhbGciOiJSUzI1Ni...",
  "token_type": "Bearer",
  "expires_in": "3600"
}
```
